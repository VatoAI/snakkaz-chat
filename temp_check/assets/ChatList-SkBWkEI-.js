import{j as e}from"./vendor-ui-DJT7aDMV.js";import{c as p}from"./index-DqZGoT8B.js";import{p as j,i as f,d as y}from"./vendor-utils-BiRAyoyP.js";import"./vendor-react-CkjGjP8g.js";import"./vendor-supabase-0rZ8WFOd.js";const h=({name:t,avatar:l,isActive:x,onClick:a,unreadCount:i=0,securityLevel:r,lastMessage:c,lastMessageTime:d,isGroup:m})=>{const s=()=>r==="p2p_e2ee"?e.jsx(f,{className:"w-3 h-3 text-green-500"}):r==="server_e2ee"?e.jsx(y,{className:"w-3 h-3 text-cybergold-400"}):null;return e.jsxs("div",{className:p("flex items-center p-2 rounded-lg cursor-pointer hover:bg-cyberdark-800/50 transition-colors",x?"bg-cyberdark-800":""),onClick:a,children:[e.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-cyberdark-800 mr-3",children:l?e.jsx("img",{src:l,alt:t,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-cybergold-500",children:m?e.jsx(j,{className:"w-5 h-5"}):t.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-200 truncate",children:t}),s()&&e.jsx("span",{className:"ml-1",children:s()})]}),c&&e.jsx("p",{className:"text-xs text-gray-400 truncate",children:c})]}),e.jsxs("div",{className:"flex flex-col items-end ml-2",children:[d&&e.jsx("span",{className:"text-xs text-gray-500",children:d}),i>0&&e.jsx("span",{className:"mt-1 px-1.5 py-0.5 text-xs rounded-full bg-cybergold-600 text-white min-w-5 text-center",children:i})]})]})},w=({groups:t,activeGroupId:l,onSelectGroup:x,conversations:a=[],activeConversationId:i,onSelectConversation:r,userProfiles:c={},className:d=""})=>{const m=s=>s==="p2p_e2ee"?"Maximum security":s==="server_e2ee"?"High security":"Standard security";return e.jsxs("div",{className:p("space-y-1",d),children:[t.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"px-2 mb-1 text-xs uppercase font-semibold text-gray-500",children:"Grupper"}),e.jsx("div",{className:"space-y-0.5",children:t.map(s=>e.jsx(h,{id:s.id,name:s.name,avatar:s.avatar_url,isActive:s.id===l,onClick:()=>x(s.id),unreadCount:0,securityLevel:s.security_level,lastMessage:m(s.security_level),isGroup:!0},s.id))})]}),a.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"px-2 mb-1 text-xs uppercase font-semibold text-gray-500",children:"Samtaler"}),e.jsx("div",{className:"space-y-0.5",children:a.map(s=>{var u;const n=c[s.id]||{username:"Unknown",avatar_url:null};return e.jsx(h,{id:s.id,name:n.username,avatar:n.avatar_url,isActive:s.id===i,onClick:()=>r==null?void 0:r(s.id),unreadCount:s.unreadCount||0,lastMessage:(u=s.lastMessage)==null?void 0:u.content,lastMessageTime:s.lastMessage?new Date(s.lastMessage.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):void 0,isGroup:!1},s.id)})})]}),t.length===0&&a.length===0&&e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"Ingen samtaler eller grupper"})})]})};export{w as ChatList};
