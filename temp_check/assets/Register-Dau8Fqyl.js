import{u as M,q as X,j as e,c as Z,b as L,e as A,d as J,r as $,s as G}from"./vendor-ui-DJT7aDMV.js";import{r as o,L as S}from"./vendor-react-CkjGjP8g.js";import{u as Q,z as k}from"./vendor-forms-D9wFpGa4.js";import{A as W,a as Y,F as ee,b as y,c as v,d as N,e as C,f as w,t as se}from"./alert-DOF9wRG0.js";import{c as F,u as re,a as te}from"./index-DqZGoT8B.js";import{B as ae}from"./button-DFN2cwgL.js";import{I as R}from"./input-DGCO0cLz.js";import{C as oe,a as ne,b as ce,d as le,c as de,e as ie}from"./card-BRsmtwOm.js";import{b as me,ab as xe,U as be,h as ue,i as z}from"./vendor-utils-BiRAyoyP.js";import"./label-DyFGaCKG.js";import"./vendor-supabase-0rZ8WFOd.js";var E="Checkbox",[fe,Le]=Z(E),[ge,pe]=fe(E),D=o.forwardRef((s,m)=>{const{__scopeCheckbox:t,name:x,checked:b,defaultChecked:a,required:f,disabled:d,value:n="on",onCheckedChange:g,form:r,...i}=s,[c,I]=o.useState(null),_=M(m,l=>I(l)),p=o.useRef(!1),P=c?r||!!c.closest("form"):!0,[h,B]=X({prop:b,defaultProp:a??!1,onChange:g,caller:E}),V=o.useRef(h);return o.useEffect(()=>{const l=c==null?void 0:c.form;if(l){const j=()=>B(V.current);return l.addEventListener("reset",j),()=>l.removeEventListener("reset",j)}},[c,B]),e.jsxs(ge,{scope:t,state:h,disabled:d,children:[e.jsx(L.button,{type:"button",role:"checkbox","aria-checked":u(h)?"mixed":h,"aria-required":f,"data-state":U(h),"data-disabled":d?"":void 0,disabled:d,value:n,...i,ref:_,onKeyDown:A(s.onKeyDown,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:A(s.onClick,l=>{B(j=>u(j)?!0:!j),P&&(p.current=l.isPropagationStopped(),p.current||l.stopPropagation())})}),P&&e.jsx(O,{control:c,bubbles:!p.current,name:x,value:n,checked:h,required:f,disabled:d,form:r,style:{transform:"translateX(-100%)"},defaultChecked:u(a)?!1:a})]})});D.displayName=E;var T="CheckboxIndicator",H=o.forwardRef((s,m)=>{const{__scopeCheckbox:t,forceMount:x,...b}=s,a=pe(T,t);return e.jsx(J,{present:x||u(a.state)||a.state===!0,children:e.jsx(L.span,{"data-state":U(a.state),"data-disabled":a.disabled?"":void 0,...b,ref:m,style:{pointerEvents:"none",...s.style}})})});H.displayName=T;var he="CheckboxBubbleInput",O=o.forwardRef(({__scopeCheckbox:s,control:m,checked:t,bubbles:x=!0,defaultChecked:b,...a},f)=>{const d=o.useRef(null),n=M(d,f),g=$(t),r=G(m);o.useEffect(()=>{const c=d.current;if(!c)return;const I=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(I,"checked").set;if(g!==t&&p){const P=new Event("click",{bubbles:x});c.indeterminate=u(t),p.call(c,u(t)?!1:t),c.dispatchEvent(P)}},[g,t,x]);const i=o.useRef(u(t)?!1:t);return e.jsx(L.input,{type:"checkbox","aria-hidden":!0,defaultChecked:b??i.current,...a,tabIndex:-1,ref:n,style:{...a.style,...r,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});O.displayName=he;function u(s){return s==="indeterminate"}function U(s){return u(s)?"indeterminate":s?"checked":"unchecked"}var K=D,ke=H;const q=o.forwardRef(({className:s,...m},t)=>e.jsx(K,{ref:t,className:F("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...m,children:e.jsx(ke,{className:F("flex items-center justify-center text-current"),children:e.jsx(me,{className:"h-4 w-4"})})}));q.displayName=K.displayName;const je=k.object({username:k.string().min(3,{message:"Brukernavn må være minst 3 tegn."}).max(20,{message:"Brukernavn kan ikke være mer enn 20 tegn."}),email:k.string().email({message:"Vennligst oppgi en gyldig e-postadresse."}),password:k.string().min(8,{message:"Passord må være minst 8 tegn."}).regex(/[A-Z]/,{message:"Passord må inneholde minst én stor bokstav."}).regex(/[0-9]/,{message:"Passord må inneholde minst ett tall."}).regex(/[^a-zA-Z0-9]/,{message:"Passord må inneholde minst ett spesialtegn."}),confirmPassword:k.string(),acceptTerms:k.boolean().refine(s=>s===!0,{message:"Du må godta vilkårene for å fortsette."})}).refine(s=>s.password===s.confirmPassword,{message:"Passordene samsvarer ikke.",path:["confirmPassword"]}),_e=()=>{const{signUp:s}=re(),{toast:m}=te(),[t,x]=o.useState(!1),[b,a]=o.useState(null),[f,d]=o.useState(!1),n=Q({resolver:se(je),defaultValues:{username:"",email:"",password:"",confirmPassword:"",acceptTerms:!1}}),g=async r=>{d(!0),a(null);try{await s(r.email,r.password,{username:r.username,full_name:""}),m({title:"Registrering vellykket!",description:"Sjekk e-posten din for å bekrefte kontoen."}),n.reset()}catch(i){console.error("Registration error:",i),a(i instanceof Error?i.message:"Kunne ikke registrere konto. Prøv igjen senere.")}finally{d(!1)}};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-cyberdark-950 py-8",children:e.jsxs("div",{className:"w-full max-w-md px-4",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:"/logos/snakkaz-gold.svg",alt:"Snakkaz Logo",className:"h-16 w-auto",onError:r=>{const i=r.target;i.onerror=null,i.src="/logos/snakkaz-gold.png"}})}),e.jsxs(oe,{className:"border-cybergold-600/20 bg-cyberdark-900",children:[e.jsxs(ne,{className:"space-y-1",children:[e.jsx(ce,{className:"text-center text-2xl font-bold text-cybergold-400",children:"Opprett konto"}),e.jsx(le,{className:"text-center text-cybergold-600",children:"Registrer deg for å starte med Snakkaz"})]}),e.jsxs(de,{children:[b&&e.jsxs(W,{variant:"destructive",className:"mb-4 bg-red-900/40 border-red-800",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx(Y,{children:b})]}),e.jsx(ee,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(g),className:"space-y-4",children:[e.jsx(y,{control:n.control,name:"username",render:({field:r})=>e.jsxs(v,{children:[e.jsx(N,{className:"text-cybergold-300",children:"Brukernavn"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-3 h-4 w-4 text-cybergold-500"}),e.jsx(C,{children:e.jsx(R,{placeholder:"ditt_brukernavn",className:"pl-10 bg-cyberdark-800 border-cyberdark-700 text-cybergold-200",...r})})]}),e.jsx(w,{className:"text-red-400"})]})}),e.jsx(y,{control:n.control,name:"email",render:({field:r})=>e.jsxs(v,{children:[e.jsx(N,{className:"text-cybergold-300",children:"E-post"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-3 h-4 w-4 text-cybergold-500"}),e.jsx(C,{children:e.jsx(R,{placeholder:"din.epost@eksempel.no",className:"pl-10 bg-cyberdark-800 border-cyberdark-700 text-cybergold-200",...r})})]}),e.jsx(w,{className:"text-red-400"})]})}),e.jsx(y,{control:n.control,name:"password",render:({field:r})=>e.jsxs(v,{children:[e.jsx(N,{className:"text-cybergold-300",children:"Passord"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-3 h-4 w-4 text-cybergold-500"}),e.jsx(C,{children:e.jsx(R,{type:t?"text":"password",placeholder:"••••••••",className:"pl-10 bg-cyberdark-800 border-cyberdark-700 text-cybergold-200",...r})}),e.jsx("button",{type:"button",className:"absolute right-3 top-3 text-xs text-cybergold-500 hover:text-cybergold-400",onClick:()=>x(!t),children:t?"Skjul":"Vis"})]}),e.jsx(w,{className:"text-red-400"})]})}),e.jsx(y,{control:n.control,name:"confirmPassword",render:({field:r})=>e.jsxs(v,{children:[e.jsx(N,{className:"text-cybergold-300",children:"Bekreft passord"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-3 h-4 w-4 text-cybergold-500"}),e.jsx(C,{children:e.jsx(R,{type:t?"text":"password",placeholder:"••••••••",className:"pl-10 bg-cyberdark-800 border-cyberdark-700 text-cybergold-200",...r})})]}),e.jsx(w,{className:"text-red-400"})]})}),e.jsx(y,{control:n.control,name:"acceptTerms",render:({field:r})=>e.jsxs(v,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(C,{children:e.jsx(q,{checked:r.value,onCheckedChange:r.onChange,className:"data-[state=checked]:bg-cybergold-600 data-[state=checked]:border-cybergold-600"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(N,{className:"text-cybergold-400",children:["Jeg godtar"," ",e.jsx(S,{to:"/terms",className:"text-cybergold-300 hover:underline underline-offset-4",children:"vilkårene"})," ","og"," ",e.jsx(S,{to:"/privacy",className:"text-cybergold-300 hover:underline underline-offset-4",children:"personvernerklæringen"})]}),e.jsx(w,{className:"text-red-400"})]})]})}),e.jsx(ae,{type:"submit",className:"w-full bg-cybergold-600 text-black hover:bg-cybergold-500",disabled:f,children:f?"Registrerer...":"Registrer deg"})]})})]}),e.jsxs(ie,{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"text-center text-sm text-cybergold-500",children:["Har du allerede en konto?"," ",e.jsx(S,{to:"/",className:"font-medium text-cybergold-400 hover:underline underline-offset-4",children:"Logg inn"})]}),e.jsx("div",{className:"mt-4 p-3 bg-cyberdark-800/80 border border-cybergold-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Shield,{className:"h-4 w-4 text-green-400 mr-2"}),e.jsx("span",{className:"text-sm text-cybergold-300",children:"Hvorfor velge Snakkaz framfor andre apper?"})]}),e.jsx(S,{to:"/info",className:"px-3 py-1 rounded bg-cybergold-600/30 text-xs font-medium text-cybergold-400 hover:bg-cybergold-600/40 transition-colors",children:"Se fordeler"})]})})]})]})]})})};export{_e as default};
